#!/bin/bash
DOMAIN=$1
if [ "$DOMAIN" == "" ]; then
  echo "USAGE: $0 <domain name>"
  exit 1
fi

if [ -f $DOMAIN.pem ]; then
  echo "Keyfile exists. Will not overwrite."
  exit 0
fi
if [ -f $DOMAIN.crt ]; then
  echo "Certificate exists. Will not overwrite."
  exit 0
fi

openssl req -x509 -newkey rsa:2048 -keyout $DOMAIN.pem -out $DOMAIN.crt -days XX -nodes

